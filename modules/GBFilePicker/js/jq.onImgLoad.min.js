/**
 * jQuery 'onImagesLoaded' plugin v1.2.0 (Updated December 1, 2011)
 * Fires callback functions when images have loaded within a particular selector.
 *
 * Copyright (c) Cirkuit Networks, Inc. (http://www.cirkuit.net), 2008-2011.
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * For documentation and usage, visit "http://www.cirkuit.net/projects/jquery/onImagesLoad/"
 * Modified by Georg Busch (added error handling if image ist corrupted)
 */
(function($){$.fn.onImagesLoad=function(options){if(typeof(options)=="function"){options={all:options}}var self=this;self.opts=$.extend({},$.fn.onImagesLoad.defaults,options);if(self.opts.selectorCallback&&!self.opts.all){self.opts.all=self.opts.selectorCallback}if(self.opts.itemCallback&&!self.opts.each){self.opts.each=self.opts.itemCallback}self.bindEvents=function($imgs,container,callback){if($imgs.length===0){if(self.opts.callbackIfNoImagesExist&&callback){callback(container)}}else{var loadedImages=[];if(!$imgs.jquery){$imgs=$($imgs)}$imgs.each(function(i){var orgSrc=this.src;if(!$.browser.msie){this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}$(this).bind('error',function(){if(typeof self.opts.onError=='function')self.opts.onError(this);else $(this).load()}).bind('load',function(){if(jQuery.inArray(i,loadedImages)<0){loadedImages.push(i);if(loadedImages.length==$imgs.length){if(callback){callback.call(container,container)}}}});if(!$.browser.msie){this.src=orgSrc}else if(this.complete||this.complete===undefined){this.src=orgSrc}})}};var imgAry=[];self.each(function(){if(self.opts.each){var $imgs;if(this.tagName=="IMG"){$imgs=this}else{$imgs=$('img',this)}self.bindEvents($imgs,this,self.opts.each)}if(self.opts.all){if(this.tagName=="IMG"){imgAry.push(this)}else{$('img',this).each(function(){imgAry.push(this)})}}});if(self.opts.all){self.bindEvents(imgAry,this,self.opts.all)}return self.each(function(){})};$.fn.onImagesLoad.defaults={onError:null,all:null,each:null,callbackIfNoImagesExist:false}})(jQuery);